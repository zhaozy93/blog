### 计算机
- **输入单元** :  键盘、鼠标、扫描仪、触摸板等
- **中央处理器(CPU)**:  算数逻辑、控制、记忆等单元
- **输出单元**:  显示器、打印机等
 
###### CPU
特定功能的一个芯片，含有微指令集。 分算术逻辑单元与控制单元。
- 算术逻辑单元: 程序运算与逻辑判断
- 控制单元:协调各组件与各单元间的工作
- 外频: CPU与外部组件(如内存)进行数据传输/运算时的速度
- 倍频: CPU内部用来加速工作性能的一个倍数
- 频率就是CPU每秒钟可以进行的工作次数( 外频 * 倍频) Hz表示秒分之一， 3GHz表示每秒 3 * 10³ * 10³ * 10³ 次
- 字组大小:  每次处理的数据量大小,  这个区别称为32位与64位电脑

##### 主板
最重要的接口设备。 负责将所有设备连接在一起，让所有设备进行协调与通信。 最重要的部分是主板芯片组

##### 芯片组
两个桥接器控制各组件通信(intel为例)
- 北桥(系统总线) 连接速度较快的CPU、内存与显卡等组件
- 南桥(I/O总线) 连接速度较慢的周边接口，如硬盘、USB、网卡等

##### 计算单位
0和1成为bit， 每8各bit组成一个**Byte(字节)**

##### 传输速度
网络传输使用bit作为单位 常见bit/s 即每秒传输多少bit
8Mbit/s 换算后就是每秒钟 8 * 10³ * 10³ bit每秒 即 1M每秒

### 磁盘
##### 第一个扇区
- 主引导记录占446字节
- 分区表占64字节
每个分区占16字节，因此最多可以分4个分区
一般将最后一个分区的16字节用于指定另一个扇区，去另一个扇区继续分区 (这个分区其实是一个指针，称为扩展分区)
这样第一个扇区的分区表信息存储主分区，其余的称谓逻辑分区
常见分区 3个主分区 + N多逻辑分区

##### 开机流程
1. 读取BIOS: 写入硬件上的一个软件程序。 会去分析能够开机的硬盘，并读取第一山区额MBR位置
2. MBR存放最基本的引导加载程序，目的是加载内核文件
3. 内核文件，开始加载操作系统 
 
##### 目录树
 - 以/开始
 - 挂载: 利用一个目录作为进入点，将磁盘分区的数据放置在该目录下。 即进入该目录就可以读取该分区的意思
 - 因此是将分区挂载在某个目录树节点

### 文件系统
##### 777概念
- 每个文件都具有 User、Group、Others三种身份的权限
- 权限为 读 写 执行 --> 4 2 1 这样构成777这个概念
- 新建文件的默认权限 umask -S查看
- SUID 二进制文件有效 . 执行者临时获取文件的所有者权限
- SGID 对文件与目录有效 . 执行者临时获取文件的所属组权限
- SBIT 对目录设置SBIT之后， 只能删除内部自己的文件，不能删除其他人文件 即使有w权限

##### 文件夹的 读写执行
- 读： 读取文件列表
- 写： 有权新建、更名、移动、删除文件
- 执行： 进入该文件夹

##### 文件系统
- super block: 记录此文件系统的整体信息，inode/block使用量、剩余量以及文件系统的格式与相关信息等
- inode: 记录文件的属性，一个文件占一个inode，inode中包含文件数据所在的block码
- block: 记录文件的内容,若文件过大可能占用多个block，同时block也有可能记录更多的block码
- inode、block数量是在磁盘格式化时就固定的，不可更改，除非格式化或者resize2fs等特殊命令， 每个block的大小也是开始就固定了的
- 单个文件最大限制: 每个inode为128bytes，记录一个block需要4byte。 一个inode包含12个直连block，1个间接block、1个双间接、1个三间接。 假设1个block为4K，所以会有单个文件最大限制，但这也不是唯一决定性因素 还有文件系统其他限制
	- 12直连： 12 * 4 = 48K
	- 1个间接： 1 * ( 4 * 1024 / 4 ) * 4 = 4096K
	- 1个双间接： 1 * ( 4 * 1024 / 4 )  *  ( 4 * 1024 / 4 ) * 4 = 4194304K
	- 1个三间接：  1 * ( 4 * 1024 / 4 )  *  ( 4 * 1024 / 4 ) * 4 = 4294967296K

##### 目录树
- 不管目录还是具体文件都会占用一个indoe
- 目录: inode记录该目录的相关权限与属性和block码。 block记录目录下的文件名与该文件对应的inode码
- 文件: inode并不记录文件的文件名，可以联系链接文件
- 因此目录也有大小的，但并不是内层文件实际大小的总和

##### 链接文件
- 软链接：与windows概念一样，链接仅仅包含文件的路径名，因此文件删除后，软连接也失效
- 硬链接： 硬链接与原始文件是同一个文件，只是名称不同而已，不分配新的inode和文件，因此每添加一个硬链接就会为文件的inode连接数增加1，只有inode连接数为0时才真正删除文件
- 硬链接实现的文件名不同是因为文件名存在目录那个inode对应的block里面，再指向真正文件inode

##### 文件操作
- 所有内容都要写入内存后再进行编辑
- 内存的读写要比硬盘快很多 因此使用异步处理来同步修改回硬盘
- 内存中文件数据初始是clean状态，编辑后变为Dirty，然后定时Sync回磁盘，也可强制Sync


### Shell
###### 环境变量 $PATH
- echo $PATH来查看 用 : 来分割
- /sbin 下的命令属于基本的系统命令，如shutdown，reboot，用于启动系统，修复系统 ( 一般需要 root 权限才可以执行 )
- /bin下存放一些普通的基本命令，如ls,chmod等，这些命令在Linux系统里的配置文件脚本里经常用到
- /usr/sbin存放的一些非必须的系统命令, 用户安装的系统管理的必备程式
- /usr/bin存放一些用户命令，如led
- /bin, /sbin目录是在系统启动后挂载到根文件系统中的，所以/sbin,/bin目录必须和根文件系统在同一分区

##### vim
- yy 复制一行
- p 粘贴
- dd 剪切一行
- G移到最后一行
- nG定位到第n行
-  d$本行从当前位置开始删除到结束
- /word 搜索  n\N表示下一个或上一个
- :set nohlsearch 取消搜索高亮
- :set nu显示行号
- :1,$s/word1/word2/gc表示全文替换

##### 变量
- set 查看所有变量
- variable=value  普通定义变量
- variable="string string"   变量值包含空格
- variable="${varibale}string"    变量值包含已有变量
- variable="$(pwd)"    变量值包含某些执行sh命令

##### source、sh、exec 执行方式
- source: 在原进程中执行，不会fork子进程
- exec: 在原进程中执行，但是同时会终止原进程
- sh: 父进程会fork一个子进程，shell script在子进程中执行， 使用export会把父进程中的变量向子进程中继承

##### 输出重定向
- > 覆盖模式输出正确信息
- >> 追加模式输出正确信息
- 2> 覆盖模式输出错误信息
- 2>> 追加模式输出错误信息
- > file 2>&1 正确错误输出至同一文件
- &> file 正确错误输出指同一文件

### ACL 与 账号
###### 切换账号
- su:   单纯使用su切换身份读取变量方式为non-login shell方式，这种方式很多原本的变量不会改变，尤其是PATH
- 正确使用su -username
- sudo: 能否使用sudo取决于/etc/sudoers是否设置当前账户

### 进程管理
##### fork and exec
进程都会通过父进程以复制fork的方式产生一个一模一样的子进程，然后被复制出来的子进程再以exec的方式执行实际要执行的进程，最终就成为一个子进程的存在。 子进程拥有一个PPID指向父进程的PID

##### jobs
- 在执行命令时 最后加一个 & 则该指令以后台形式执行
- 在执行命令时如(vi)，按ctrl + z可以让命令暂停到后台， jobs -l 可以再显示出来， fg %id 可以再将后台命令取回
- jobs依赖于终端，终端挂了jobs也就都挂了

##### 脱机管理
- 脱机管理就是真正的后台任务
- at、crontab这样的定时任务算
- nohup也算一个

##### 进程通信
- 程序之间传递信号去告知对应进程应该做什么事情
- kill -l 查看所有signal
- kill -9 PID 其实就是给这个进程发送一个 9 对应的 signal而已
| Number  | Signal | Des  |
| :-------| :--------:| :--: |
| 1       | HUP  |  重启   |
| 9       | KILL |  强制退出  |
| 15      | TERM | 正常退出  |

##### 进程优先级
- 每个进程都有一个priority数值，数值越小表示优先级越高。 ps 就可以查看
- pri值我们不能主动调整，只能有内核去调整
- pri = pri_old + nice， 因此我们可以调整nice
- root可以调整nice为 -20 -19
- 普通用户只可以调整nice为 0 - 19
- nice命令或者renice命令

#####  /proc/*
- 所有进程都已PID为名有一个目录存在/proc文件夹下
- 每一个进程目录下有cmdline 和 environ等文件
- cmdline记录的是启动该进程时的命令
- environ是该进程的环境变量
- 一般进程文件夹下的文件数量可以代表socket数量

##### fuser
该命令可以查看哪些进程使用了某个文件或者目录

##### lsof
该命令查看进程打开了哪些文件或socket








